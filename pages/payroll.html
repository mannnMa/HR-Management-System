<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>HR Payroll</title>
        <link rel="icon" href="../assets/hr-logo-title.webp">

        <!--FONT LINKS-->
            <!--POPPINS FONT-->
            <link href='https://fonts.googleapis.com/css?family=Poppins' rel='stylesheet'>

            <!--INTER FONTS-->
            <link href='https://fonts.googleapis.com/css?family=Inter' rel='stylesheet'>

            <!--PUBLICK SAN-->
            <link href="https://fonts.googleapis.com/css2?family=Public+Sans:ital,wght@0,100..900;1,100..900&display=swap" rel="stylesheet">

        <script src="https://cdn.tailwindcss.com"></script>
        <!--CSS LINK-->
        <link rel="stylesheet" href="./styles/general.css">
        <link rel="stylesheet" href="./styles/sidebar.css">
        <link rel="stylesheet" href="./styles/payroll.css">

        <script>
            tailwind.config = {
                theme: {
                    extend: {
                        fontFamily: {
                            sans: ['Inter', 'sans-serif'],
                        },
                        colors: {
                            'sidebar-bg': '#1E3A8A', // Dark Blue
                            'content-bg': '#F3F4F6', // Light Gray
                            'card-bg': '#FFFFFF',
                            'primary-button': '#10B981', // Green
                            'primary-button-hover': '#059669',
                            'secondary-button': '#6B7280',
                            'secondary-button-hover': '#4B5563',
                            'danger-text': '#EF4444',
                        }
                    }
                }
            }
        </script>
        <style>
            /* Custom scrollbar for a cleaner look if needed */
            ::-webkit-scrollbar {
                width: 8px;
                height: 8px;
            }
            ::-webkit-scrollbar-track {
                background: #f1f1f1;
                border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb {
                background: #888;
                border-radius: 10px;
            }
            ::-webkit-scrollbar-thumb:hover {
                background: #555;
            }
            .input-field {
                @apply w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm;
            }
            .label-text {
                @apply block text-sm font-medium text-gray-700 mb-1;
            }
            .summary-label {
                @apply text-sm text-gray-600;
            }
            .summary-value {
                @apply text-sm font-semibold text-gray-900;
            }
            .summary-value-emphasis {
                @apply text-lg font-bold text-gray-900;
            }
            .summary-value-deduction {
                @apply text-lg font-bold text-danger-text;
            }
        </style>

        <!--sidebar style and responsiveness-->
        <style>
            #company-logo-text {
                margin-top: 15px;
                font-weight: bold;
            }
            .hr-title {
                margin-top: 16px;
            }
            .seach-input {
                margin-top: 17px;
                height: 35px;
            }
            .general-buttons {
                margin-top: 22px;
            }
            .general-title {
                margin-top: -5px;
                margin-bottom: 15px
            }
            .log-out-button {
                padding-top: -10px;
            }
            .log-out-container {
                margin-bottom: -16px;
            }  
        </style>


    </head>
    <body class="bg-content-bg font-sans">
        
        <!--Side Bar Navigation-->
        <div class="sidebar">
            <!--Company Logo-->
            <div class="sidebar-logo-container">
                <div>
                <img class="company-logo" src="../assets/company logo.webp" alt="company-logo">
                </div>
                <div>
                <h1 id="company-logo-text">Connectiv7</h1>
                </div>
            </div>
            <div>
                <h1 class="hr-title">HR ADMIN</h1>
            </div>
            <!--Search Button side bar nav-->
            <div>
                <input class="seach-input" type="text" placeholder="Search" name="search" id="searchGeneral">
            </div>
            <!--General Buttons-->
            <div class="general-buttons">
                <h3 class="general-title">General</h3>
                <div>
                <!--Employee Nav-->
                <a href="./management.html" class="employee-nav-link">
                    <div class="employee-nav">
                    <button class="employee-button">
                        <img class="employee-icon" src="../assets/employee-icon.webp" alt="employee">
                        <span class="employee-text">Employee</span>
                    </button>
                    </div>
                </a>
                <!--Payroll Nav-->
                <a href="./payroll.html" class="payroll-nav-link">
                    <div>
                    <button class="payroll-button">
                        <img class="payroll-icon" src="../assets/payroll-icon.webp" alt="Payroll">
                        <span class="payroll-text">Payroll</span>
                    </button>
                    </div>
                </a>
                <!--Job Nav-->
                <a href="./job.html" class="job-nav-link">
                <div>
                    <button class="job-button">
                        <img class="job-icon" src="../assets/job-icon.webp" alt="job">
                        <span class="job-text">Job</span>
                    </button>
                    </div>
                </a>
                <!--Calendar Nav-->
                <a href="./calendar.html" class="calendar-nav-link">
                    <div>
                    <button class="calendar-button">
                        <img class="calendar-icon" src="../assets/calendar-icon.webp" alt="calendar">
                        <span class="calendar-text">Calendar</span>
                    </button>
                    </div>
                </a>
                </div>
            </div>
            <form action="../index.html">
                <div class="log-out-container">
                <button class="log-out-button" id="logOutButton">
                    <img class="log-out-icon" src="../assets/log out - icon.webp" alt="log out">
                    <span class="log-out-text">Log Out</span>
                </button>
                </div>
            </form>
        </div>

        <!--Main Content-->
        <div class="tw-container" style="margin-left: 257px;">
            <main class="flex-1 p-6 overflow-y-auto">
                <header class="flex justify-between items-center mb-6">
                    <h1 class="text-3xl font-bold text-gray-800">Payroll Calculator</h1>
                </header>

            <div class="grid grid-cols-1 lg:grid-cols-3 gap-6">
                <section id="employeePayrollDetails" class="lg:col-span-2 bg-card-bg p-6 rounded-lg shadow-md">
                    <h2 class="text-xl font-semibold text-gray-700 mb-6">Employee Payroll Details</h2>
                    <form id="payrollForm" class="space-y-4">
                        <div>
                            <label for="employeeName" class="label-text">Employee Name:</label>
                            <input type="text" id="employeeName" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="e.g., Juan Dela Cruz">
                        </div>
                        <div>
                            <label for="employeeId" class="label-text">Employee ID:</label>
                            <input type="text" id="employeeId" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="e.g., EMP-001">
                        </div>
                        <div>
                            <label for="basicSalary" class="label-text">Basic Salary (₱):</label>
                            <div class="relative">
                                <input type="number" id="basicSalary" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="0.00">
                                <span class="absolute left-3 top-3 text-gray-500">₱</span>
                            </div>
                        </div>
                        <div>
                            <label for="workingDays" class="label-text">Payroll Period:</label>
                            <select id="workingDays" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="Choose Period">
                                <option value="" disabled selected hidden>Choose Period</option>
                                <option value="1 Month">1 Month</option>
                                <option value="15 Days">15 Days</option>
                            </select>
                        </div>
                        <div>
                            <label for="daysWorked" class="label-text">Actual Days Worked:</label>
                            <input type="number" id="daysWorked" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="e.g., 30">
                        </div>
                        <div>
                            <label for="overtimeHours" class="label-text">Overtime Hours:</label>
                            <input type="number" id="overtimeHours" class="w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="0">
                        </div>
                        <div>
                            <label for="allowances" class="label-text">Allowances (₱):</label>
                            <div class="relative">
                                <input type="number" id="allowances" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="0.00">
                                <span class="absolute left-3 top-3 text-gray-500">₱</span>
                            </div>
                        </div>
                        <div>
                            <label for="otherDeductions" class="label-text">Other Deductions (e.g., Loans) (₱):</label>
                            <div class="relative">
                                <input type="number" id="otherDeductions" class="w-full pl-10 pr-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all placeholder-gray-400" placeholder="0.00">
                                <span class="absolute left-3 top-3 text-gray-500">₱</span>
                            </div>
                        </div>

                        <div class="flex space-x-3 pt-4">
                            <button type="button" id="resetButton" class="bg-secondary-button hover:bg-secondary-button-hover text-white font-medium py-2 px-4 rounded-md">Reset</button>
                        </div>
                    </form>
                </section>

                        <section id="payrollSummary" class="bg-card-bg p-6 rounded-lg shadow-md">
                            <h2 class="text-xl font-semibold text-gray-700 mb-6">Payroll Summary</h2>
                            <div class="space-y-3">
                                <div class="flex justify-between">
                                    <span class="summary-label">Basic Pay:</span>
                                    <span id="summaryBasicPay" class="summary-value">₱0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="summary-label">Total Allowances:</span>
                                    <span id="summaryTotalAllowances" class="summary-value">₱0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="summary-label">Overtime Pay:</span>
                                    <span id="summaryOvertimePay" class="summary-value">₱0.00</span>
                                </div>
                                <hr class="my-2">
                                <div class="flex justify-between">
                                    <span class="summary-label font-bold">Gross Pay:</span>
                                    <span id="summaryGrossPay" class="summary-value-emphasis text-blue-800">₱0.00</span>
                                </div>
                                <hr class="my-2">
                                <div class="flex justify-between">
                                    <span class="summary-label">Withholding Tax:</span>
                                    <span id="summaryWithholdingTax" class="summary-value">₱0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="summary-label">SSS:</span>
                                    <span id="summarySSS" class="summary-value">₱0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="summary-label">PhilHealth:</span>
                                    <span id="summaryPhilHealth" class="summary-value">₱0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="summary-label">Pag-IBIG:</span>
                                    <span id="summaryPagibig" class="summary-value">₱0.00</span>
                                </div>
                                <div class="flex justify-between">
                                    <span class="summary-label">Other Deductions:</span>
                                    <span id="summaryOtherDeductions" class="summary-value">₱0.00</span>
                                </div>
                                <hr class="my-2">
                                <div class="flex justify-between">
                                    <span class="summary-label font-bold">Total Deductions:</span>
                                    <span id="summaryTotalDeductions" class="summary-value-deduction text-red-800">-₱0.00</span>
                                </div>
                                <hr class="my-2 border-2 border-gray-300">
                                <div class="flex justify-between">
                                    <span class="summary-label text-xl font-bold">Net Pay:</span>
                                    <span id="summaryNetPay" class="summary-value-emphasis text-primary-button">₱0.00</span>
                                </div>
                            </div>
                            <div class="mt-8 flex flex-col space-y-3">
                                <button id="savePayrollButton" class="bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-md w-full">Save Payroll</button>
                                <button id="generatePayslipButton" class="bg-green-600 hover:bg-green-700 text-white font-medium py-2 px-4 rounded-md w-full">Generate Payslip</button>
                            </div>
                        </section>
                </div>
                <div id="messageArea" class="mt-6 p-4 rounded-md text-center hidden"></div>
            </main>
            </div>
        </div>
        <!-- Collapsible Payroll History Section -->
    <div style="margin-top: 40px; font-family: 'Poppins', sans-serif;">
      <button id="toggleHistoryBtn"
        style="background-color: #1C2AA8; color: white; font-weight: bold; padding: 10px 20px; border: none; border-radius: 8px; cursor: pointer;">
        Show Payroll History
      </button>
    
      <div id="payrollHistoryContainer" style="margin-top: 20px; display: none;">
        <h2 style="font-size: 24px; font-weight: bold; color: #1C2AA8;">Saved Payroll History</h2>
    
        <table id="historyTable" style="width: 100%; border-collapse: collapse; margin-top: 20px;">
          <thead style="background-color: #1C2AA8; color: white;">
            <tr>
              <th style="padding: 10px; text-align: left;">Name</th>
              <th style="padding: 10px; text-align: left;">ID</th>
              <th style="padding: 10px; text-align: left;">Period</th>
              <th style="padding: 10px; text-align: left;">Net Pay</th>
              <th style="padding: 10px; text-align: left;">Date Saved</th>
              <th style="padding: 10px; text-align: left;">Action</th>
            </tr>
          </thead>
          <tbody id="historyTableBody" style="background-color: white;"></tbody>
        </table>
    
        <p id="noRecordsMessage" style="color: gray; margin-top: 15px; display: none;">No payroll history available.</p>
      </div>
    </div>


        <!-- Confirmation container Log Out Button -->
        <div class="confirm-overlay-sidebar" id="confirmOverlay">
            <div class="confirm-box-sidebar">
                <video class="logout-animate" src="../assets/animation/logout.mp4" autoplay muted loop playsinline></video>
                <p>Are you sure you want to log out?</p>
                <div class="confirm-actions-sidebar">
                <button id="confirmYes">Confirm</button>
                <button id="confirmCancel">Cancel</button>
                </div>
            </div>
        </div>


        <!--JS LINK-->
        <script src="./js/payroll.js" defer></script>
        <script src="./js/sidebar.js" defer></script>
    </body>
</html>
